var RockSSE={getJSON(msg){try{const json=JSON.parse(msg);return json}catch(error){return!1}},start(config){const conn=new EventSource("/rocksse"+config.url);conn.onmessage=(event)=>{if(event.data===ProcessWire.config["rocksse-done"]){conn.close();if(typeof config.ondone==="function"){config.ondone()}}
if(typeof config.onmessage==="function"){config.onmessage(event.data,event)}};conn.onerror=(event)=>{if(typeof config.onerror==="function")config.onerror(event);if(typeof config.errorAlert==="function"){config.errorAlert(event)}else{console.error(event);alert("Error - check console")}};return conn},}