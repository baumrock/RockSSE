var RockSSE;(()=>{class _RockSSE{streams={};addStream(url){const stream=new Stream(url);this.streams[url]=stream;console.log("added stream",stream);return stream}}
class Stream{conn=!1;debug=!1;isRunning=!1;url=!1;onmessage=!1;onerror=!1;ondone=!1;stopped=!1;constructor(url){this.url=url}
addCallbacks(){const conn=this.conn;conn.onmessage=(event)=>{if(this.onmessage)this.onmessage(event);};conn.onerror=(event)=>{if(this.onerror)this.onerror(event);}}
log(data){if(!this.debug)return;console.log(data)}
start(){if(this.isRunning)return;this.log("starting stream ...",this.url);this.isRunning=!0;this.conn=new EventSource("/rocksse"+this.url);this.addCallbacks()}
stop(){if(!this.isRunning)return;this.log("stopping stream ...");this.isRunning=!1;this.conn.close();if(this.stopped)this.stopped();}}
RockSSE=new _RockSSE()})()